{
  "hash": "5e1764db9decd06d77a412dea90d4d45",
  "result": {
    "markdown": "---\ntitle: \"Binary Dependent Variable\"\nsubtitle: \"R for Data Analysis<br>Session 12\"\ntitle-slide-attributes:\n  data-background-size: stretch\n  data-slide-number: none\nauto-stretch: false\ninstitute: \"University of Mannheim<br>Fall 2023\"\nauthor: \"Viktoriia Semenova\"\nfooter: \"[ðŸ”— r4da.live](https://r4da.live/)\"\nlogo: images/logo.png\nformat:\n  revealjs:\n    theme: slides.scss\n    transition: fade\n    incremental: true   \n    slide-number: true\n    chalkboard: true\nexecute:\n  echo: true\neditor_options: \n  chunk_output_type: console\neditor: \n  markdown: \n    wrap: 80\n---\n\n\n\n\n\n# Visualising Marginal Effects\n\n## Marginal Effects Plot\n\n$$\nY = \\beta_0 + \\beta_1X + \\beta_2D + \\beta_3X \\cdot D\n$$\n![](https://tompepinsky.files.wordpress.com/2017/04/mfx1.jpeg){fig-align=\"center\"}\n\n\n## Quiz: Which of these statements are correct? {.smaller}\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_7da28fd5\" data-update-every=\"1\" tabindex=\"0\" style=\"top:0;right:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">04</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n\nIndridason and Bowler (2014) explore the determinants of cabinet size in\nparliamentary systems. Below you can find a plot based on one of their model.\n<!-- $$\\widehat {Cabinet~Size} = \\hat{\\beta}_{0} + \\hat{\\beta}_{1}(\\operatorname{Legislature Size}) + \\hat{\\beta}_{2}(\\operatorname{Legislature Size}) + \\hat{\\beta}_{3}(\\operatorname{Population Size}) + \\hat{\\beta}_{4}(\\operatorname{EU membership}) + \\epsilon$$ -->\n\n::: columns\n::: {.column width=\"50%\"}\n1.  Systematic component of the model likely includes variable *Legislature\n    Size* interacted with another variable.\\\n2.  Marginal effect of the variable *Legislature Size* is constant across all\n    values of *Legislature Size* variable.\n3.  The relationship between *legislature size* and *cabinet size* is strongest\n    for smaller values of *legislature size*.\n4.  For legislatures with sizes above 500, there is, on average, no significant\n    effect of *legislature size* on *cabinet size*.\n5.  *Legislature size* seems to be inversely related to *cabinet size*.\n:::\n\n::: {.column width=\"50%\"}\n::: r-stack\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](12-slides_files/figure-revealjs/unnamed-chunk-2-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n::: fragment\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](12-slides_files/figure-revealjs/unnamed-chunk-3-1.png){fig-align='center' width=2100}\n:::\n:::\n\n:::\n:::\n:::\n:::\n\n# Binary Dependent Variable\n\n## Does TV Propaganda Affect Voting? {.smaller}\n\n\n```{dot}\n//| echo: false\n//| out-width: 100%\ndigraph D {\n  node [shape=ellipse];\n  edge [len = 1.2, arrowhead = vee];\n  a [label = \"Russian TV\\nReception\"];\n  b [label = \"Pro-Russian Vote\"];\n  c [label = \"Living within\\n25 km from Border\"];\n  \n  {rank=same a b};\n  {rank=sink c};\n  a->b;\n  c->a;\n  c->b;\n}\n```\n\n\n## Data {.smaller}\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\">   </th>\n   <th style=\"text-align:right;\"> Unique (#) </th>\n   <th style=\"text-align:right;\"> Missing (%) </th>\n   <th style=\"text-align:right;\"> Mean </th>\n   <th style=\"text-align:right;\"> SD </th>\n   <th style=\"text-align:right;\"> Min </th>\n   <th style=\"text-align:right;\"> Median </th>\n   <th style=\"text-align:right;\"> Max </th>\n   <th style=\"text-align:right;\">    </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> russian_tv </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.6 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 1.0 </td>\n   <td style=\"text-align:right;\"> 1.0 </td>\n   <td style=\"text-align:right;\">  <svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" class=\"svglite\" width=\"48.00pt\" height=\"12.00pt\" viewBox=\"0 0 48.00 12.00\"><defs><style type=\"text/css\">\n    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {\n      fill: none;\n      stroke: #000000;\n      stroke-linecap: round;\n      stroke-linejoin: round;\n      stroke-miterlimit: 10.00;\n    }\n    .svglite text {\n      white-space: pre;\n    }\n  </style></defs><rect width=\"100%\" height=\"100%\" style=\"stroke: none; fill: none;\"></rect><defs><clipPath id=\"cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw\"><rect x=\"0.00\" y=\"0.00\" width=\"48.00\" height=\"12.00\"></rect></clipPath></defs><g clip-path=\"url(#cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw)\">\n</g><defs><clipPath id=\"cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw\"><rect x=\"0.00\" y=\"2.88\" width=\"48.00\" height=\"9.12\"></rect></clipPath></defs><g clip-path=\"url(#cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw)\"><rect x=\"1.78\" y=\"4.99\" width=\"4.44\" height=\"6.67\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"6.22\" y=\"11.66\" width=\"4.44\" height=\"0.00\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"10.67\" y=\"11.66\" width=\"4.44\" height=\"0.00\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"15.11\" y=\"11.66\" width=\"4.44\" height=\"0.00\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"19.56\" y=\"11.66\" width=\"4.44\" height=\"0.00\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"24.00\" y=\"11.66\" width=\"4.44\" height=\"0.00\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"28.44\" y=\"11.66\" width=\"4.44\" height=\"0.00\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"32.89\" y=\"11.66\" width=\"4.44\" height=\"0.00\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"37.33\" y=\"11.66\" width=\"4.44\" height=\"0.00\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"41.78\" y=\"3.22\" width=\"4.44\" height=\"8.44\" style=\"stroke-width: 0.38; fill: #000000;\"></rect></g></svg>\n</td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> pro_russian_vote </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.2 </td>\n   <td style=\"text-align:right;\"> 0.4 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 1.0 </td>\n   <td style=\"text-align:right;\">  <svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" class=\"svglite\" width=\"48.00pt\" height=\"12.00pt\" viewBox=\"0 0 48.00 12.00\"><defs><style type=\"text/css\">\n    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {\n      fill: none;\n      stroke: #000000;\n      stroke-linecap: round;\n      stroke-linejoin: round;\n      stroke-miterlimit: 10.00;\n    }\n    .svglite text {\n      white-space: pre;\n    }\n  </style></defs><rect width=\"100%\" height=\"100%\" style=\"stroke: none; fill: none;\"></rect><defs><clipPath id=\"cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw\"><rect x=\"0.00\" y=\"0.00\" width=\"48.00\" height=\"12.00\"></rect></clipPath></defs><g clip-path=\"url(#cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw)\">\n</g><defs><clipPath id=\"cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw\"><rect x=\"0.00\" y=\"2.88\" width=\"48.00\" height=\"9.12\"></rect></clipPath></defs><g clip-path=\"url(#cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw)\"><rect x=\"1.78\" y=\"3.22\" width=\"4.44\" height=\"8.44\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"6.22\" y=\"11.66\" width=\"4.44\" height=\"0.00\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"10.67\" y=\"11.66\" width=\"4.44\" height=\"0.00\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"15.11\" y=\"11.66\" width=\"4.44\" height=\"0.00\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"19.56\" y=\"11.66\" width=\"4.44\" height=\"0.00\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"24.00\" y=\"11.66\" width=\"4.44\" height=\"0.00\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"28.44\" y=\"11.66\" width=\"4.44\" height=\"0.00\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"32.89\" y=\"11.66\" width=\"4.44\" height=\"0.00\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"37.33\" y=\"11.66\" width=\"4.44\" height=\"0.00\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"41.78\" y=\"9.03\" width=\"4.44\" height=\"2.63\" style=\"stroke-width: 0.38; fill: #000000;\"></rect></g></svg>\n</td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> within_25km </td>\n   <td style=\"text-align:right;\"> 2 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.6 </td>\n   <td style=\"text-align:right;\"> 0.5 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 1.0 </td>\n   <td style=\"text-align:right;\"> 1.0 </td>\n   <td style=\"text-align:right;\">  <svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" class=\"svglite\" width=\"48.00pt\" height=\"12.00pt\" viewBox=\"0 0 48.00 12.00\"><defs><style type=\"text/css\">\n    .svglite line, .svglite polyline, .svglite polygon, .svglite path, .svglite rect, .svglite circle {\n      fill: none;\n      stroke: #000000;\n      stroke-linecap: round;\n      stroke-linejoin: round;\n      stroke-miterlimit: 10.00;\n    }\n    .svglite text {\n      white-space: pre;\n    }\n  </style></defs><rect width=\"100%\" height=\"100%\" style=\"stroke: none; fill: none;\"></rect><defs><clipPath id=\"cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw\"><rect x=\"0.00\" y=\"0.00\" width=\"48.00\" height=\"12.00\"></rect></clipPath></defs><g clip-path=\"url(#cpMC4wMHw0OC4wMHwwLjAwfDEyLjAw)\">\n</g><defs><clipPath id=\"cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw\"><rect x=\"0.00\" y=\"2.88\" width=\"48.00\" height=\"9.12\"></rect></clipPath></defs><g clip-path=\"url(#cpMC4wMHw0OC4wMHwyLjg4fDEyLjAw)\"><rect x=\"1.78\" y=\"5.36\" width=\"4.44\" height=\"6.30\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"6.22\" y=\"11.66\" width=\"4.44\" height=\"0.00\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"10.67\" y=\"11.66\" width=\"4.44\" height=\"0.00\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"15.11\" y=\"11.66\" width=\"4.44\" height=\"0.00\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"19.56\" y=\"11.66\" width=\"4.44\" height=\"0.00\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"24.00\" y=\"11.66\" width=\"4.44\" height=\"0.00\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"28.44\" y=\"11.66\" width=\"4.44\" height=\"0.00\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"32.89\" y=\"11.66\" width=\"4.44\" height=\"0.00\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"37.33\" y=\"11.66\" width=\"4.44\" height=\"0.00\" style=\"stroke-width: 0.38; fill: #000000;\"></rect><rect x=\"41.78\" y=\"3.22\" width=\"4.44\" height=\"8.44\" style=\"stroke-width: 0.38; fill: #000000;\"></rect></g></svg>\n</td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n- `russian_tv`: indicator for whether voter's precinct received Russian TV (1) or not (0)\n- `pro_russian_vote`: indicator for whether respondent voted for pro-Russian party in 2014 Ukrainian elections (1) or not (0)\n- `within_25km`: indicator for whether respondent's precinct is within 25 kilometers from Russian border (1) or not (0)\n\n## Linear Probability Model {.smaller}\n\n$$\\text{Pro-Russian Vote} \\sim \\beta_0 + \\beta_1 \\text{Russian TV} + \\beta_2 \\text{Living within 25km} + \\varepsilon$$\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](12-slides_files/figure-revealjs/unnamed-chunk-6-1.png){fig-align='center' width=2100 height=80%}\n:::\n:::\n\n\n## Out-of-Bound Predictions\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](12-slides_files/figure-revealjs/unnamed-chunk-7-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n## Logistic Regression Solution {.smaller}\n\n-   Apply a transformation to the *linear predictor*\n    $\\beta_0 + \\beta_1 \\text{Russian TV} + \\beta_2 \\text{Living within 25km}$,\n    to ensure that outcome is bounded between 0 and 1\n\n-   The inverse logit (aka sigmoid) function takes a value between $-\\infty$ and\n    $+\\infty$ and maps it to a value between 0 and 1:\n\n$$\nlogit^{-1}(x) = \\frac{\\exp(x)}{1+\\exp(x)}\n$$\n\n## Logistic Function {.smaller}\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](12-slides_files/figure-revealjs/unnamed-chunk-8-1.png){fig-align='center' width=2100 height=50%}\n:::\n:::\n\n\n---\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](12-slides_files/figure-revealjs/unnamed-chunk-9-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n## Logistic Regression Model {.smaller}\n\n-   $Y = 1:$ yes, $Y = 0:$ no; two mutually exclusive outcomes\n-   $\\pi = Pr(Y = 1)$: **probability** that $Y=1$\n-   $\\frac{\\pi}{1-\\pi}$: **odds** that $Y = 1$\n-   $\\log\\Big(\\frac{\\pi}{1-\\pi}\\Big)$: **log odds**\n-   Go from $\\pi$ to $\\log\\Big(\\frac{\\pi}{1-\\pi}\\Big)$ using the **logit\n    transformation**\n\n. . .\n\n$$\\underbrace{\\log\\Big(\\frac{\\pi}{1-\\pi}\\Big)}_{\\text{straight line}} = \\underbrace{\\beta_0 + \\beta_1~X_1 + \\cdots + \\beta_k~X_k}_{\\text{linear predictor}}$$\n\n## Odds and Probabilities Example {.smaller}\n\nSuppose there is a **70% chance** it will rain tomorrow\n\n-   Probability it will rain is $\\pi = \\mathbf{p = 0.7}$\n-   Probability it won't rain is $1 - \\pi = \\mathbf{1 - p = 0.3}$\n-   Odds $\\omega$ it will rain are **7 to 3**, **7:3**,\n    $\\omega = \\frac{\\pi}{1-\\pi}= \\mathbf{\\frac{0.7}{0.3} \\approx 2.33}$\n\n. . . \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\npi <- seq(0, 1, length.out = 6)\ntibble(pi, 1 - pi, \"odds\" = pi / (1 - pi), \"log odds\" = log(pi / (1 - pi))) %>% \n  kable()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> pi </th>\n   <th style=\"text-align:right;\"> 1 - pi </th>\n   <th style=\"text-align:right;\"> odds </th>\n   <th style=\"text-align:right;\"> log odds </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> 1.0 </td>\n   <td style=\"text-align:right;\"> 0.0000000 </td>\n   <td style=\"text-align:right;\"> -Inf </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 0.2 </td>\n   <td style=\"text-align:right;\"> 0.8 </td>\n   <td style=\"text-align:right;\"> 0.2500000 </td>\n   <td style=\"text-align:right;\"> -1.3862944 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 0.4 </td>\n   <td style=\"text-align:right;\"> 0.6 </td>\n   <td style=\"text-align:right;\"> 0.6666667 </td>\n   <td style=\"text-align:right;\"> -0.4054651 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 0.6 </td>\n   <td style=\"text-align:right;\"> 0.4 </td>\n   <td style=\"text-align:right;\"> 1.5000000 </td>\n   <td style=\"text-align:right;\"> 0.4054651 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 0.8 </td>\n   <td style=\"text-align:right;\"> 0.2 </td>\n   <td style=\"text-align:right;\"> 4.0000000 </td>\n   <td style=\"text-align:right;\"> 1.3862944 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1.0 </td>\n   <td style=\"text-align:right;\"> 0.0 </td>\n   <td style=\"text-align:right;\"> Inf </td>\n   <td style=\"text-align:right;\"> Inf </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n## Probabilities, Odds, and Log Odds {.smaller}\n\n**Odds**\n\n$$\\omega = \\frac{\\pi}{1-\\pi}  = \\exp\\Big\\{\\log\\Big(\\frac{\\pi}{1-\\pi}\\Big)\\Big\\} \n= \\exp\\{\\beta_0 + \\beta_1~X_1 + \\cdots + \\beta_k~X_k\\}$$\n\n**Log odds**\n\n$$\\log(\\omega) = \\log\\Big(\\frac{\\pi}{1-\\pi}\\Big) = \\beta_0 + \\beta_1~X_1 + \\cdots + \\beta_k~X_k$$\n\n**Probability**\n\n$$\\pi = \\frac{\\omega}{1 + \\omega}  = \\frac{\\exp\\{\\beta_0 + \\beta_1~X_1 + \\cdots + \\beta_k~X_k\\}}{1 + \\exp\\{\\beta_0 + \\beta_1~X_1 + \\cdots + \\beta_k~X_k\\}}$$\n\n<!-- (1) **Logistic model**: log odds = $\\log\\Big(\\frac{\\pi}{1-\\pi}\\Big) = \\beta_0 + \\beta_1~X$ -->\n\n<!-- (2) **Odds =** $\\exp\\Big\\{\\log\\Big(\\frac{\\pi}{1-\\pi}\\Big)\\Big\\} = \\frac{\\pi}{1-\\pi}$ -->\n\n<!-- (3) Combining (1) and (2) with what we saw earlier -->\n\n<!-- $$\\text{Probability} = \\pi = \\frac{\\exp\\{\\beta_0 + \\beta_1~X_1 + \\cdots + \\beta_k~X_k\\}}{1 + \\exp\\{\\beta_0 + \\beta_1~X_1 + \\cdots + \\beta_k~X_k\\}}$$ -->\n\n<!-- ## Logistic Regression Recap -->\n\n<!-- -   Model for binary DV $\\pi = Pr(Y = 1)$ -->\n<!-- -   Coefficients represent expected changes in **log-odds**, hence no intuitive -->\n<!--     interpretation as with linear models -->\n\n## Fitting the Model in `R` {.smaller}\n\n\n::: {.cell layout-align=\"center\"}\n\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"width: auto !important; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:left;\">   </th>\n   <th style=\"text-align:center;\"> OLS </th>\n   <th style=\"text-align:center;\"> Logit </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> (Intercept) </td>\n   <td style=\"text-align:center;\"> 0.196 </td>\n   <td style=\"text-align:center;\"> âˆ’1.474 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> (0.035) </td>\n   <td style=\"text-align:center;\"> (0.214) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> russian_tv </td>\n   <td style=\"text-align:center;\"> 0.288 </td>\n   <td style=\"text-align:center;\"> 1.790 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\">  </td>\n   <td style=\"text-align:center;\"> (0.077) </td>\n   <td style=\"text-align:center;\"> (0.504) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> within_25km </td>\n   <td style=\"text-align:center;\"> âˆ’0.208 </td>\n   <td style=\"text-align:center;\"> âˆ’1.319 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;box-shadow: 0px 1px\">  </td>\n   <td style=\"text-align:center;box-shadow: 0px 1px\"> (0.077) </td>\n   <td style=\"text-align:center;box-shadow: 0px 1px\"> (0.493) </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Num.Obs. </td>\n   <td style=\"text-align:center;\"> 358 </td>\n   <td style=\"text-align:center;\"> 358 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> R2 </td>\n   <td style=\"text-align:center;\"> 0.039 </td>\n   <td style=\"text-align:center;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> R2 Adj. </td>\n   <td style=\"text-align:center;\"> 0.034 </td>\n   <td style=\"text-align:center;\">  </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Log.Lik. </td>\n   <td style=\"text-align:center;\"> âˆ’194.925 </td>\n   <td style=\"text-align:center;\"> âˆ’188.738 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> F </td>\n   <td style=\"text-align:center;\"> 7.238 </td>\n   <td style=\"text-align:center;\"> 6.534 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n## Logit Coefficients Interpretation {.smaller}\n\n$$\n\\log\\left[ \\frac { \\widehat{Pr( \\text{Pro-russian Vote} = \\operatorname{1} )} }{ 1 - \\widehat{Pr(  \\text{Pro-russian Vote} = \\operatorname{1} )} } \\right] = -1.474 + 1.79 \\cdot\\text{Russian TV} - 1.32\\cdot\\text{Living within 25 km}\n$$\n\n-   Sign and significance are straightforward to interpret\n\n. . .\n\n> The **log-odds** of voting for a pro-Russian party are expected to be 1.79\n> more for those exposed to Russian TV compared to those without exposure to\n> Russian TV (the baseline group), holding all else constant.\n\n> The **odds** of voting for a pro-Russian party or those exposed to Russian TV\n> are expected to be 5.98 ($e^{1.79}$) **times** the odds for those without\n> exposure to Russian TV, holding all else constant.\n\n$$\\text{Odds Ratio}  = e^{\\hat{\\beta}_j} = \\exp\\{\\hat{\\beta}_j\\}$$\n\n## Predicted Probabilities Plot\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](12-slides_files/figure-revealjs/unnamed-chunk-13-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n## Predicted Probabilities By Hand {.smaller}\n\n$$\n\\log\\left[ \\frac { \\widehat{Pr( \\text{Pro-russian Vote} = \\operatorname{1} )} }{ 1 - \\widehat{Pr(  \\text{Pro-russian Vote} = \\operatorname{1} )} } \\right] = -1.474 + 1.79 \\cdot\\text{Russian TV} - 1.32\\cdot\\text{Living within 25 km}\n$$\n\n. . . \n\n\n$$\n \\hat\\pi = \\widehat{Pr( \\text{Pro-russian Vote} = \\operatorname{1} )} =\\frac{exp(-1.474\n + 1.79 \\cdot \\text{Russian TV} - 1.32\\cdot\\text{Living within 25 km})}{1 + exp(-1.474 + 1.79 \\cdot \\text{Russian TV}- 1.32\\cdot\\text{Living within 25 km})}\n$$ \n\n. . . \n\n$$\n\\widehat{Pr( \\text{Pro-russian Vote} = \\operatorname{1} |~\\text{Russian TV} = 1,~\\text{Living within 25 km} = 1)} \\\\=\\frac{exp(-1.474 + 1.79  - 1.32)}{1 + exp(-1.474 + 1.79  - 1.32)}\\\\\n= \\frac{exp(-1.004)}{1 + exp(1 -1.004)} \\approx \\frac{0.366}{1.996} \\approx 0.18\n$$\n\n. . . \n\n$$\n\\widehat{Pr( \\text{Pro-russian Vote} = \\operatorname{1} |~\\text{Russian TV} = 0,~\\text{Living within 25 km} = 1)} \\\\=\\frac{exp(-1.474  - 1.32)}{1 + exp(-1.474   - 1.32)}\\\\\n= \\frac{exp(-2.794)}{1 + exp(1 -2.794)} \\approx \\frac{0.061}{1.166} \\approx 0.05\n$$\n\n\n## Predicted Values {.smaller}\n\n- Transforming probabilities $\\pi$ back to 0/1 scale of the *response* variable $Y$\n- Requires threshold for which values translate to $Y = 1$ and $Y = 0$; $\\pi > 0.5$ most common \n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> pro_russian_vote </th>\n   <th style=\"text-align:right;\"> russian_tv </th>\n   <th style=\"text-align:right;\"> within_25km </th>\n   <th style=\"text-align:right;\"> .fitted </th>\n   <th style=\"text-align:right;\"> prediction </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0.2682990 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0.2682990 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.1863569 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0.0577046 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0.0577046 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0.5783134 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0.0577046 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0.0577046 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0.2682990 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0.2682990 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n## Model Predictions vs. Actual Outomes {.smaller}\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> prediction </th>\n   <th style=\"text-align:right;\"> pro_russian_vote </th>\n   <th style=\"text-align:right;\"> count </th>\n   <th style=\"text-align:left;\">   </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 267 </td>\n   <td style=\"text-align:left;\"> True Negatives </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 77 </td>\n   <td style=\"text-align:left;\"> False Negatives </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 0 </td>\n   <td style=\"text-align:right;\"> 6 </td>\n   <td style=\"text-align:left;\"> False Positives </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 1 </td>\n   <td style=\"text-align:right;\"> 8 </td>\n   <td style=\"text-align:left;\"> True Positives </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n# Appendix: Interpretation of Coefficients in Logit Models\n\n## Compare the odds for two groups {.smaller}\n\n| Russian TV | Pro-Russian Vote | No pro-Russian Vote |\n|:-----------|-----------------:|--------------------:|\n| No         |               27 |                 131 |\n| Yes        |               58 |                 142 |\n\n-   We want to compare the risk of Pro-Russian Vote for those with exposure to\n    Russian TV and those without it.\n-   We'll use the odds to compare the two groups\n\n$$\\text{odds} = \\frac{P(\\text{success})}{P(\\text{failure})} = \\frac{\\text{# of successes}}{\\text{# of failures}}$$\n\n## Compare the odds for two groups {.smaller}\n\n| Russian TV | Pro-Russian Vote | No pro-Russian Vote |\n|:-----------|-----------------:|--------------------:|\n| No         |               27 |                 131 |\n| Yes        |               58 |                 142 |\n\n-   Odds of voting pro-Russian with Russian TV exposure:\n    $\\frac{58}{142} = 0.408$\n\n-   Odds of voting pro-Russian without Russian TV exposure:\n    $\\frac{27}{131} = 0.206$\n\n-   Based on this, we see those with a Russian TV exposure had higher odds of\n    voting pro-Russian than those without Russian propaganda exposure.\n\n-   We can summarize the relationship with odds ratio (OR):\n    $OR = \\frac{\\text{odds}_1}{\\text{odds}_2} = \\frac{\\omega_1}{\\omega_2}$\n\n## Odds Ratio: with vs. without exposure to Russian TV {.smaller}\n\n| Russian TV | Pro-Russian Vote | No pro-Russian Vote |\n|:-----------|-----------------:|--------------------:|\n| No         |               27 |                 131 |\n| Yes        |               58 |                 142 |\n\n-   Odds of voting pro-Russian with Russian TV exposure:\n    $\\frac{58}{142} = 0.408$\n-   Odds of voting pro-Russian without Russian TV exposure:\n    $\\frac{27}{131} = 0.206$\n\n$OR = \\frac{\\text{odds}_{with}}{\\text{odds}_{without}} = \\frac{0.408}{0.206} = 1.982$\n\nThe odds of voting pro-Russian are 1.982 times higher for those with exposure to\nRussian TV than those without exposure to Russian TV.\n\n## Coefficients in Logit Model {.smaller}\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nm3 <- glm(pro_russian_vote ~ russian_tv,\n          family = binomial,\n          data = UA)\nm3$coefficients[2] # log odds \n```\n\n::: {.cell-output .cell-output-stdout}\n```\nrussian_tv \n 0.6839764 \n```\n:::\n:::\n\n\n> The log odds of voting pro-Russian are 0.684 higher for those with exposure to\n> Russian TV compared to those without exposure to Russian TV.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nexp(m3$coefficients[2]) # odds \n```\n\n::: {.cell-output .cell-output-stdout}\n```\nrussian_tv \n  1.981742 \n```\n:::\n:::\n\n\n> The odds of voting pro-Russian are 1.982 **times** higher for those with\n> exposure to Russian TV than those without exposure to Russian TV.\n\n## Continous Predictors {.smaller}\n\n> For each additional unit change in $X_k$, the log-odds of Y are expected to\n> increase by $\\beta_k$ (holding all else contant).\n\n> For each additional unit change in $X_k$, the odds of Y are expected to\n> mulitply by a factor of $e^{\\beta_k}$ (holding all else contant).\n\nOR\n\n> For each additional unit change in $X_k$, the odds of Y are expected to\n> increase by $e^{\\beta_k}%$ (holding all else contant).\n\n## Confidence Intervals {.smaller}\n\n::: columns\n::: {.column width=\"50%\"}\n#### Log Odds\n\nWe can calculate the **C% confidence interval** for $\\beta_k$ as the following:\n\n$$\n\\Large{\\hat{\\beta}_k \\pm z^* SE_{\\hat{\\beta}_k}}\n$$\n\nwhere $z^*$ is calculated from the $N(0,1)$ distribution\n\nThis is an interval for the change in the log-odds for every one unit increase\nin $x_k$.\n:::\n\n::: {.column width=\"50%\"}\n#### Odds\n\nThe change in **odds** for every one unit increase in $x_k$.\n\n$$\n\\Large{e^{\\hat{\\beta}_k \\pm z^* SE_{\\hat{\\beta}_k}}}\n$$\n\n. . .\n\n**Interpretation:** We are $C\\%$ confident that for every one unit increase in\n$x_k$, the odds multiply by a factor of\n$e^{\\hat{\\beta}_k - z^* SE_{\\hat{\\beta}_k}}$ to\n$e^{\\hat{\\beta}_k + z^* SE_{\\hat{\\beta}_k}}$, holding all else constant.\n:::\n:::\n\n# Appendix: Fitting Logit Models\n\n## Maximum Likelihood Estimation (MLE) {.smaller}\n\n-   20 data points that we assume come from a normal distribution. We know that\n    normal distribution has two parameters, mean and variance\n-   Which of the plotted distributions has most likely generated the data\n    points?\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](12-slides_files/figure-revealjs/unnamed-chunk-18-1.png){fig-align='center' width=80%}\n:::\n:::\n\n\n\n\n## Maximum Likelihood Estimation (MLE) {.smaller}\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](12-slides_files/figure-revealjs/unnamed-chunk-19-1.png){fig-align='center' width=40%}\n:::\n:::\n\n\n-   The points seem to be centered around zero and they range is between\n    $[-2,2]$\n-   Most likely, it is the violet distribution that has generated the points\n-   With MLE: (1) we observe the data, (2) assume a distribution it come from,\n    and (3) look for the values of parameters defining this distribution that\n    result in the curve that best fits the data\n\n--------------------------------------------------------------------------------\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](12-slides_files/figure-revealjs/unnamed-chunk-20-1.png){fig-align='center' width=2100}\n:::\n:::\n\n<!-- # Intro -->\n\n<!-- ```{r} -->\n\n<!-- #| echo: false -->\n\n<!-- countdown(minutes = 4, color_background = \"white\", left = 1) -->\n\n<!-- ``` -->\n\n<!-- ::: columns -->\n\n<!-- ::: {.column width=\"30%\"} -->\n\n<!-- ```{dot} -->\n\n<!-- //| echo: false -->\n\n<!-- //| fig-width: 3 -->\n\n<!-- //| fig-height: 3 -->\n\n<!-- //| out-width: 100% -->\n\n<!-- digraph D { -->\n\n<!--   node [shape=oval, fontname=\"AtkinsonHyperlegible-Regular\"]; -->\n\n<!--   edge [minlen = 1.2, arrowhead = vee, arrowsize=0.5]; -->\n\n<!--   a [label = \"Beauty Score\"]; -->\n\n<!--   b [label = \"Evaluations\"]; -->\n\n<!--   c [label = \"Female\"]; -->\n\n<!--   {rank=same a b}; -->\n\n<!--   {rank=sink c}; -->\n\n<!--   a->b; -->\n\n<!--   c->a; -->\n\n<!--   c->b; -->\n\n<!-- } -->\n\n<!-- ``` -->\n\n<!-- :::  -->\n\n<!-- ::: {.column width=\"70%\"} -->\n\n<!-- 1.  After specifying the DGP in a DAG and following our identification strategy, we can interpret the estimated coefficient for the effect of *Beauty Score* on *Evaluations* causally. -->\n\n<!-- 2.  After specifying the DGP in a DAG and following our identification strategy, we can interpret the estimated coefficient for the effect of *Female* on *Evaluations* causally. -->\n\n<!-- 3. On average, a 5-point increase in *Beauty Score* would be associated with 0.4-point increase in *Teaching Evaluations*, for both female and female instructors.  -->\n\n<!-- 4. The effect of *Female* on *Teaching Evaluations* would be represented through the change in the slope of the regression coefficient for *Beauty Score*.  -->\n\n<!-- 5. For $evals = \\beta_0 + \\beta_1 \\cdot Female$,  $\\beta_1$ would be the equal to difference-in-means estimator.  -->\n\n<!-- :::  -->\n\n<!-- :::  -->\n\n",
    "supporting": [
      "12-slides_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/countdown-0.4.0/countdown.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/countdown-0.4.0/countdown.js\"></script>\n<script src=\"../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}