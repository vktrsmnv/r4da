{
  "hash": "951ab17ef5194402a0ac8e645aa1446a",
  "result": {
    "markdown": "---\ntitle: \"Difference-in-Difference\" \nsubtitle: \"Data Analytics and Visualization with R<br>Session 12\" \ntitle-slide-attributes:\n  data-background-size: stretch\n  data-slide-number: none\nauto-stretch: false\ninstitute: \"University of Mannheim<br>Spring 2023\"\nauthor: \"Viktoriia Semenova\"\nfooter: \"[ðŸ”— r4da.live](https://r4da.live/)\"\nlogo: images/logo.png\nformat:\n  revealjs:\n    theme: ../slides.scss\n    transition: fade\n    incremental: true   \n    slide-number: true\n    chalkboard: true\nexecute:\n  echo: true\neditor_options: \n  chunk_output_type: console\neditor: \n  markdown: \n    wrap: 80\n---\n\n\n\n\n\n# Intro \n\n\n## Quiz\n<!-- ## Quiz: Selecting Research Design -->\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n```{=html}\n<div class=\"countdown\" id=\"timer_03036d98\" data-update-every=\"1\" tabindex=\"0\" style=\"right:0;bottom:0;\">\n<div class=\"countdown-controls\"><button class=\"countdown-bump-down\">&minus;</button><button class=\"countdown-bump-up\">&plus;</button></div>\n<code class=\"countdown-time\"><span class=\"countdown-digits minutes\">06</span><span class=\"countdown-digits colon\">:</span><span class=\"countdown-digits seconds\">00</span></code>\n</div>\n```\n:::\n:::\n\n\nYou need to explore if women are more likely to quit politics after losing their first race than men. Discuss the following research design choices. \n\n1. What candidates should be included in the sample? (e.g., only those who lost the election once? only those who decided to quit politics?)\n\n2. What would be the unit of analysis? \n\n3. What model would you use? Why? \n\n\n<!-- You are interested in exploring the effect of election fraud perception on trust in government. You obtained data from multiple waves of WVS -->\n<!-- (2010-2020). -->\n\n<!-- Discuss the pros and cons of using each design. -->\n\n<!-- 1.  Multiple Linear Regression (MLR) with Statistical Control -->\n<!-- 2.  Matching -->\n<!-- 3.  MLR with fixed effects for countries and years -->\n\n## Closing Backdoors\n### Model-based vs. Design-based Identification\n\n-   Option 1: Do our best to measure all confounding variables (and assume we did if that's plausible): *regression*, *matching*, *IPW* \n-   Option 2: Make comparisons _within_ units with repeated measures of same units, thus controlling for unobserved things that stay constant in units over time: *fixed effects*\n- Option 3: Look for quasi-experiments (**as-if** random assignment)\n  - Difference-in-difference \n  - Regression discontinuity design   \n\n\n## Each Method Has Pros and Cons\n\n![](https://evalf22.classes.andrewheiss.com/slides/img/08-class/causality-continuum.png)\n\n## Natural Experiments \n\n- Situation in which there is random assignment of a treatment via a randomization device, but this assignment is not under the control of the researcher\n- Randomization may be imperfect, but external validity is high \n\n- Examples: \n  -  Erikson and Stoker (2011): How Vietnam draft vulnerability influenced political attitudes? \n    - The 1969 Vietnam draft lottery assigned numbers to birth dates in order to determine which young men would be called to fight in Vietnam\n  -  Bhavnani (2009): Do people continue to elect women after quotas are lifted?\n    - One third of seats to women candidates in Indiaâ€™s local elections are randomly reserved and change from one election to the next\n\n\n\n## Recap: Interactions {.smaller}\n\n$$\n\\widehat{\\text{Running for Office}} = \\hat\\beta_0 + \\hat\\beta_1 \\text{Losing Elections} + \\hat\\beta_2 \\text{Female} +\\\\ \\hat\\beta_3 (\\text{Losing Elections} \\times \\text{Female})\n$$\n\n- The effect of *Losing Elections* on running for office is allowed to be different for *Men* vs. *Women* \n\n<!-- - $\\hat\\beta_0$ is the expected vote share for non-incumbent & zero Policy Campaign Focus   -->\n<!-- - $\\hat\\beta_1$ is the effect of Policy Campaign Focus for non-incumbents on the expected vote share -->\n<!-- - $\\hat\\beta_2$ is the effect of incumbent status on the expected vote share when Policy Campaign Focus is zero  -->\n<!-- - $\\hat\\beta_3$ is difference in the effect of Policy Campaign Focus between incumbents and non-incumbents   -->\n\n\n# Diff-in-Diff\n\n## What is Difference In Differences\n\n- We want to know the effect of some policy \n- We look for cities/states/countries/etc. which implemented it and measure the outcome _before_ and _after_ the policy implementation (difference #1)\n- These _before_ and _after_ comparisons would include the effect of policy but also other stuff that changes over time \n- So we find units that did _not_ introduce the policy (which are similar to the \"treated\" one) and use them as controls: compare them for the same pre- and post-treatment times (difference #2)\n- We then compare the changes in outcome for cases where policy was implemented (difference #1) to changes for control (difference #2) $\\Rightarrow$ **Difference-in-differences**\n\n## DAG for Diff-in-Diff\n\n\n```{dot}\n//| echo: false\n//| fig-width: 7\n//| fig-asp: 0.7\n//| out-width: 100%\ndigraph D {\n  node [shape=ellipse, fontname=\"AtkinsonHyperlegible-Regular\"];\n  edge [len = 1.2, arrowhead = vee];\n  a [label = \"Treatment\\n(Policy)\"];\n  b [label = \"Outcome\"];\n  c [label = \"Time\"];\n  \n  {rank=same a b};\n  {rank=source a};\n  a->b;\n  c->a;\n  c->b;\n}\n```\n\n\n\n## Example: Minimum Wage and Unemployment \n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](12-diff-in-diff_files/figure-revealjs/unnamed-chunk-3-1.png){fig-align='center' width=2100}\n:::\n:::\n\n\n---\n\n![](images/FBaP8R8XIAEycMC.jpeg)\n\n## Card & Krueger (1994) \n\n::: columns\n::: {.column width=\"40%\"}\n- New Jersey raised their minimum wage in early 1992 ($4.25 â†’ $5.05), but Pennsylvania didn't \n- Outcome variable: Average number of jobs per fast food restaurant in January 1992 and November 1992\n\n::: \n::: {.column width=\"60%\"}\n\n```{dot}\n//| echo: false\n//| fig-width: 5\n//| fig-asp: 0.7\n//| out-width: 100%\ndigraph D {\n  node [shape=ellipse, fontname=\"AtkinsonHyperlegible-Regular\"];\n  edge [len = 1.2, arrowhead = vee];\n  a [label = \"Minimum Wage\\nIncrease\"];\n  b [label = \"Unemployment\"];\n  c [label = \"Time\"];\n  d [label = \"Being in NJ\"];\n\n  {rank=same a b};\n  {rank=sink d};\n  {rank=source c};\n  a->b;\n  c->a;\n  c->b;\n  d->a;\n  d->b;\n}  \n\n```\n\n\n::: \n::: \n\n\n\n\n\n\n## Outcome Matrix \n\n<br>\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n`````{=html}\n<table style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\">   </th>\n   <th style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> Pre mean </th>\n   <th style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> Post mean </th>\n   <th style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> <span class=\"color-light-5\">âˆ† <span class=\"smaller\">(post âˆ’ pre)</span></span> </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> Control </td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>A</b><br><span class=\"small\">(never treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>B</b><br><span class=\"small\">(never treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;background-color: #DDDDDD !important;color: #FFFFFF !important;background-color: #FFFFFF !important;\"> <b>B âˆ’ A</b> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> Treatment </td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>C</b><br><span class=\"small\">(not yet treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>D</b><br><span class=\"small\">(treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;background-color: #DDDDDD !important;color: #FFFFFF !important;background-color: #FFFFFF !important;\"> <b>D âˆ’ C</b> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;color: #FFFFFF !important;background-color: #FFFFFF !important;\"> âˆ†<br><span class=\"smaller\">(treatment âˆ’ control)</span> </td>\n   <td style=\"text-align:center;color: #FFFFFF !important;background-color: #FFFFFF !important;\"> <b>C âˆ’ A</b> </td>\n   <td style=\"text-align:center;color: #FFFFFF !important;background-color: #FFFFFF !important;\"> <b>D âˆ’ B</b> </td>\n   <td style=\"text-align:center;background-color: #DDDDDD !important;color: #FFFFFF !important;background-color: #FFFFFF !important;color: #FFFFFF !important;background-color: #FFFFFF !important;\"> <span class=\"\"><b>(B âˆ’ A) âˆ’ (D âˆ’ C)</b></span> <i>or</i><br><span class=\"\"><b>(B âˆ’ D) âˆ’ (A âˆ’ C)</b></span> </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n## Outcome Matrix: âˆ†<sub>within units</sub>\n\n<br>\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n`````{=html}\n<table style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\">   </th>\n   <th style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> Pre mean </th>\n   <th style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> Post mean </th>\n   <th style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> âˆ† <span class=\"smaller\">(post âˆ’ pre)</span> </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> Control </td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>A</b><br><span class=\"small\">(never treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>B</b><br><span class=\"small\">(never treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;background-color: #DDDDDD !important;\"> <b>B âˆ’ A</b> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> Treatment </td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>C</b><br><span class=\"small\">(not yet treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>D</b><br><span class=\"small\">(treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;background-color: #DDDDDD !important;\"> <b>D âˆ’ C</b> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;color: #FFFFFF !important;background-color: #FFFFFF !important;\"> âˆ†<br><span class=\"smaller\">(treatment âˆ’ control)</span> </td>\n   <td style=\"text-align:center;color: #FFFFFF !important;background-color: #FFFFFF !important;\"> <b>A âˆ’ C</b> </td>\n   <td style=\"text-align:center;color: #FFFFFF !important;background-color: #FFFFFF !important;\"> <b>B âˆ’ D</b> </td>\n   <td style=\"text-align:center;background-color: #DDDDDD !important;color: #FFFFFF !important;background-color: #FFFFFF !important;\"> <span class=\"\"><b>(B âˆ’ A) âˆ’ (D âˆ’ C)</b></span> <i>or</i><br><span class=\"\"><b>(B âˆ’ D) âˆ’ (A âˆ’ C)</b></span> </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n## Outcome Matrix: âˆ†<sub>within groups</sub>\n\n<br>\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n`````{=html}\n<table style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\">   </th>\n   <th style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> Pre mean </th>\n   <th style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> Post mean </th>\n   <th style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> <span class=\"color-light-5\">âˆ† <span class=\"smaller\">(post âˆ’ pre)</span></span> </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> Control </td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>A</b><br><span class=\"small\">(never treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>B</b><br><span class=\"small\">(never treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;color: #FFFFFF !important;background-color: #FFFFFF !important;\"> <b>B âˆ’ A</b> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> Treatment </td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>C</b><br><span class=\"small\">(not yet treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>D</b><br><span class=\"small\">(treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;color: #FFFFFF !important;background-color: #FFFFFF !important;\"> <b>D âˆ’ C</b> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;background-color: #DDDDDD !important;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> âˆ†<br><span class=\"smaller\">(treatment âˆ’ control)</span> </td>\n   <td style=\"text-align:center;background-color: #DDDDDD !important;\"> <b>C âˆ’ A</b> </td>\n   <td style=\"text-align:center;background-color: #DDDDDD !important;\"> <b>D âˆ’ B</b> </td>\n   <td style=\"text-align:center;background-color: #DDDDDD !important;color: #FFFFFF !important;background-color: #FFFFFF !important;\"> <span class=\"\"><b>(B âˆ’ A) âˆ’ (D âˆ’ C)</b></span> <i>or</i><br><span class=\"\"><b>(B âˆ’ D) âˆ’ (A âˆ’ C)</b></span> </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n## Problems \n\n- Comparing only before/after  âˆ†<sub>within units</sub>\n  - You're only looking at the treatment group:\n  - Impossible to know if change happened because of treatment or just naturally\n\n- Comparing only treatment/control  âˆ†<sub>within groups</sub>\n  - You're only looking at post-treatment values\n  - Impossible to know if change happened because of natural growth\n\n## Outcome Matrix: âˆ†<sub>within units</sub> âˆ’ âˆ†<sub>within groups</sub>\n\n<br>\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n`````{=html}\n<table style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\">   </th>\n   <th style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> Pre mean </th>\n   <th style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> Post mean </th>\n   <th style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> âˆ† <span class=\"smaller\">(post âˆ’ pre)</span> </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> Control </td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>A</b><br><span class=\"small\">(never treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>B</b><br><span class=\"small\">(never treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;background-color: #DDDDDD !important;\"> <b>B âˆ’ A</b> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> Treatment </td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>C</b><br><span class=\"small\">(not yet treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>D</b><br><span class=\"small\">(treated) </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;background-color: #DDDDDD !important;\"> <b>D âˆ’ C</b> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;background-color: #DDDDDD !important;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> âˆ†<br><span class=\"smaller\">(treatment âˆ’ control)</span> </td>\n   <td style=\"text-align:center;background-color: #DDDDDD !important;\"> <b>C âˆ’ A</b> </td>\n   <td style=\"text-align:center;background-color: #DDDDDD !important;\"> <b>D âˆ’ B</b> </td>\n   <td style=\"text-align:center;background-color: #DDDDDD !important;background-color: #DDDDDD !important;\"> <span class=\"color-5\"><b>(D âˆ’ C) âˆ’ (B âˆ’ A)</b></span> <i>or</i><br><span class=\"color-5\"><b>(D âˆ’ B) âˆ’ (C âˆ’ A)</b></span> </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n## Minimum Wage and Unemployment Diff-in-Diff\n\n<br>\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n`````{=html}\n<table style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\">   </th>\n   <th style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> Pre mean </th>\n   <th style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> Post mean </th>\n   <th style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> âˆ† <span class=\"smaller\">(post âˆ’ pre)</span> </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> Pennsylvania </td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>23.33</b><br><span class=\"small\">A </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>21.17</b><br><span class=\"small\">B </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;background-color: #DDDDDD !important;\"> <b>-2.16</b><br><span class=\"small\">B âˆ’ A </span>\n</td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> New Jersey </td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>20.44</b><br><span class=\"small\">C </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b>21.03</b><br><span class=\"small\">D </span>\n</td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;background-color: #DDDDDD !important;\"> <b>0.59</b><br><span class=\"small\">D âˆ’ C </span>\n</td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;background-color: #DDDDDD !important;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> âˆ†<br><span class=\"smaller\">(NJ âˆ’ PA)</span> </td>\n   <td style=\"text-align:center;background-color: #DDDDDD !important;\"> <b>-2.89</b><br><span class=\"small\">C âˆ’ A </span>\n</td>\n   <td style=\"text-align:center;background-color: #DDDDDD !important;\"> <b>-0.14</b><br><span class=\"small\">D âˆ’ B </span>\n</td>\n   <td style=\"text-align:center;background-color: #DDDDDD !important;background-color: #DDDDDD !important;\"> <b>(0.59) âˆ’ (âˆ’2.16) = <br><span class=\"color-5\">2.75</span></b> </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n## Diff-in-Diff Illustration\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](12-diff-in-diff_files/figure-revealjs/dd-graph-1.png){fig-align='center' width=100%}\n:::\n:::\n\n\n\n<!-- ## Diff-in-Diff Illustration -->\n\n\n\n\n\n\n## Diff-in-Diff Model Equation\n\n$$\\begin{aligned}\n\\color{#440154FF}{Y_{it}}\\ =\\ &\\alpha + \\beta\\ \\color{#35608DFF}{\\text{Group}_i} + \\gamma\\ \\color{#22A884FF}{\\text{Time}_t} + \\\\\n&\\delta\\ \\color{#800010}{(\\text{Group}_i \\times \\text{Time}_t)} + \\varepsilon_{it}\n\\end{aligned}$$\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n\n:::\n:::\n\n\n\n<span  style=\"color: #35608DFF\">Group = 1 or TRUE if treatment</span>\n\n<span style=\"color: #22A884FF\">Time = 1 or TRUE if after</span>\n\n<span style=\"color: #666666\">Î± = Mean of control, pre-treatment</span>\n\n<span  style=\"color: #35608DFF\">Î² = Increase in outcome across groups</span>\n\n<span style=\"color: #22A884FF\">Î³ = Increase in outcome over time within units</span>\n\n<span style=\"color: #800010\">Î´ = Difference in differences!</span>\n\n\n## Diff-in-Diff Coefficients \n\n$$\\begin{aligned}\n\\color{#440154FF}{Y_{it}}\\ =\\ &\\color{#666666}{\\alpha} + \\color{#35608DFF}{\\beta\\ \\text{Group}_i} + \\color{#22A884FF}{\\gamma\\ \\text{Time}_t} + \\\\\n&\\color{#800010}{\\delta\\ (\\text{Group}_i \\times \\text{Time}_t)} + \\varepsilon_{it}\n\\end{aligned}$$\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n`````{=html}\n<table style=\"margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\">   </th>\n   <th style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> â€‚Pre meanâ€‚ </th>\n   <th style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> â€‚Post meanâ€‚ </th>\n   <th style=\"text-align:center;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> â€‚âˆ† <span class=\"smaller\">(post âˆ’ pre)</span>â€‚ </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> Control </td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b><span style=\"color: #666666;\">Î±</span></b> </td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b><span style=\"color: #666666;\">Î±</span> + <span style=\"color: #22A884FF;\">Î³</span></b> </td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;background-color: #EEEEEE !important;\"> <b><span style=\"color: #22A884FF;\">Î³</span></b> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> Treatment </td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b><span style=\"color: #666666;\">Î±</span> + <span style=\"color: #35608DFF;\">Î²</span></b> </td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;\"> <b><span style=\"color: #666666;\">Î±</span> + <span style=\"color: #35608DFF;\">Î²</span> + <span style=\"color: #22A884FF;\">Î³</span> + <span style=\"color: #800010\">Î´</span></b> </td>\n   <td style=\"text-align:center;background-color: #FFFFFF !important;background-color: #EEEEEE !important;\"> <b><span style=\"color: #22A884FF;\">Î³</span> + <span style=\"color: #800010\">Î´</span></b> </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:center;background-color: #EEEEEE !important;font-weight: bold;color: #800010 !important;background-color: rgba(128, 0, 16, 0.31) !important;\"> â€‚âˆ† <span class=\"smaller\">(trtmt âˆ’ ctrl)</span>â€‚ </td>\n   <td style=\"text-align:center;background-color: #EEEEEE !important;\"> <b><span style=\"color: #35608DFF;\">Î²</span></b> </td>\n   <td style=\"text-align:center;background-color: #EEEEEE !important;\"> <b><span style=\"color: #35608DFF;\">Î²</span> + <span style=\"color: #800010\">Î´</span></b> </td>\n   <td style=\"text-align:center;background-color: #EEEEEE !important;background-color: #EEEEEE !important;\"> <b><span style=\"color: #800010\">Î´</span></b> </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n\n\n<!-- ## What is Diff-in-Diff? -->\n\n<!-- -   We combine untreated groups with fixed effects -->\n<!-- -   We have a treated group that we observe both *before* and *after* they're -->\n<!--     treated -->\n<!-- -   And we have an untreated group -->\n<!-- -   The treated and control groups probably aren't identical - there are back -->\n<!--     doors! So... we control for group like with fixed effects -->\n\n    \n## Parallel Trend Assumption\n\n-   Treatment and control groups might have different values at first, but we   assume that the treatment group would have changed like the control group in  the absence of treatment\n-   We are assuming is that Time affected the Treatment and Control groups equally\n-   Otherwise, our attempt to control for Time by using how it changed in Control won't work\n- We can test it if there is data available for *before* treatment \n\n\n## Parallel Trend Assumption\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](12-diff-in-diff_files/figure-revealjs/plot-trends-1-1.png){fig-align='center' width=100%}\n:::\n:::\n\n\n## Parallel Trend Assumption Violation\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](12-diff-in-diff_files/figure-revealjs/plot-trends-2-back-1.png){fig-align='center' width=100%}\n:::\n:::\n\n\n## Parallel Trend Assumption Violation\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](12-diff-in-diff_files/figure-revealjs/plot-trends-3-back-1.png){fig-align='center' width=100%}\n:::\n:::\n\n\n## Parallel Trend Assumption Holds\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](12-diff-in-diff_files/figure-revealjs/plot-trends-1-back-1.png){fig-align='center' width=100%}\n:::\n:::\n",
    "supporting": [
      "12-diff-in-diff_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/countdown-0.4.0/countdown.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/countdown-0.4.0/countdown.js\"></script>\n<script src=\"../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ],
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}